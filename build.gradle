/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id "io.spring.dependency-management" version "1.0.6.RELEASE"
}

allprojects {
    group = 'com.revenat'
    version = '0.0.1'

    ext {
        // misc
        commonsLang3Version = '3.9'
        jaxbVersion = '2.3.2'
        jakartaInjectVersion = '2.6.1'
        jakartaAnnotationsVersion = '1.3.5'
        javassistVersion = '3.26.0-GA'
        reflectionsVersion = '0.9.12'
        hibernateValidatorVersion = '5.4.3.Final'
        validationApiVersion = '1.1.0.Final'
        elVersion = '3.0.1-b09'
        // log
        log4jVersion = '2.13.0'
        // persistence
        hibernateVersion = '5.2.18.Final'
        jpaApiVersion = '1.0.0.Final'
        hibernateToolsVersion = '5.2.12.Final'
        h2Version = '1.4.200'
        sqLiteVersion = '3.30.1'
        mysqlVersion = '5.1.47'
        // server
        jerseyVersion = '2.29.1'
        // test
        junitVersion = '5.5.1'
        hamcrestVersion = '2.1'
        mockitoVersion = '3.0.0'
        jerseyJunitVersion = '2.1.0'

        misc = [
                commonsLang3: "org.apache.commons:commons-lang3:$commonsLang3Version",
                jakartaInject: "org.glassfish.hk2.external:jakarta.inject:$jakartaInjectVersion",
                jakartaAnnotations : "jakarta.annotation:jakarta.annotation-api:$jakartaAnnotationsVersion",
                jaxbRuntime  : "org.glassfish.jaxb:jaxb-runtime:$jaxbVersion",
                javassist: "org.javassist:javassist:$javassistVersion",
                reflections : "org.reflections:reflections:$reflectionsVersion",
                hibernateValidator : "org.hibernate:hibernate-validator:$hibernateValidatorVersion",
                validationApi : "javax.validation:validation-api:$validationApiVersion",
                el : "org.glassfish:javax.el:$elVersion"
        ]

        server = [
                jerseyHttp   : "org.glassfish.jersey.containers:jersey-container-grizzly2-http:$jerseyVersion",
                jerseyServlet: "org.glassfish.jersey.containers:jersey-container-servlet:$jerseyVersion",
                jerseyHk2    : "org.glassfish.jersey.inject:jersey-hk2:$jerseyVersion",
                jerseyJson   : "org.glassfish.jersey.media:jersey-media-json-jackson:$jerseyVersion",
        ]

        persistence = [
                hibernateCore: "org.hibernate:hibernate-core:$hibernateVersion",
                jpaApi: "org.hibernate.javax.persistence:hibernate-jpa-2.1-api:$jpaApiVersion",
                hibernateTools: "org.hibernate:hibernate-tools:$hibernateToolsVersion",
                h2: "com.h2database:h2:$h2Version",
                sqLite : "org.xerial:sqlite-jdbc:$sqLiteVersion",
                c3p0: "org.hibernate:hibernate-c3p0:$hibernateVersion",
                mysql : "mysql:mysql-connector-java:$mysqlVersion",
                hikariCp: "org.hibernate:hibernate-hikaricp:$hibernateVersion"
        ]

        log = [
                log4jApi  : "org.apache.logging.log4j:log4j-api:$log4jVersion",
                log4jCore : "org.apache.logging.log4j:log4j-core:$log4jVersion",
                log4jSlf4j: "org.apache.logging.log4j:log4j-slf4j-impl:$log4jVersion",
                log4jWeb  : "org.apache.logging.log4j:log4j-web:$log4jVersion",
        ]

        tests = [
                junitApi          : "org.junit.jupiter:junit-jupiter-api:$junitVersion",
                junitEngine       : "org.junit.jupiter:junit-jupiter-engine:$junitVersion",
                junitParams       : "org.junit.jupiter:junit-jupiter-params:$junitVersion",
                hamcrest          : "org.hamcrest:hamcrest:$hamcrestVersion",
                mockito           : "org.mockito:mockito-junit-jupiter:$mockitoVersion",
                jerseyTestCore    : "org.glassfish.jersey.test-framework:jersey-test-framework-core:$jerseyVersion",
                jerseyTestProvider: "org.glassfish.jersey.test-framework.providers:jersey-test-framework-provider-grizzly2:$jerseyVersion",
                jerseyJunit       : "com.github.hanleyt:jersey-junit:$jerseyJunitVersion"
        ]
    }
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    task allDeps(type: DependencyReportTask) {}
    task allDepsInside(type: DependencyInsightReportTask) {}

    repositories {
        mavenLocal()
        maven {
            url = 'https://repo.maven.apache.org/maven2'
        }
        maven {
            url = "https://plugins.gradle.org/m2/"
        }
    }

    dependencyManagement {
        dependencies {
            dependency 'org.javassist:javassist:3.23.1-GA'
        }
    }

    dependencies {
        implementation log.log4jApi, log.log4jCore, log.log4jSlf4j
    }

    test {
        useJUnitPlatform()
    }

    sourceCompatibility = '1.11'

    publishing {
        publications {
            maven(MavenPublication) {
                from(components.java)
            }
        }
    }

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}
